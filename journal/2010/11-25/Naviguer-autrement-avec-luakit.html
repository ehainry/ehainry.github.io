<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<title>Naviguer autrement avec luakit [velsheda]</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../css/bootstrap.min.css" rel="stylesheet">
<link href="../../css/plus.css" rel="stylesheet">
<link rel="stylesheet" href="../../css/pygments.css" type="text/css" media="screen, projection" />
<link rel="icon" type="image/png" href="/icon.png" />
<meta name="author" content="EH" />
</head>
<body>
<nav class="navbar navbar-inverse navbar-static-top" role="navigation">
<div class="container">
<div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#menu-c">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
<a class="navbar-brand" href="/journal/index.html">Velsheda</a>
</div>
<div class="collapse navbar-collapse" id="menu-c">
<ul class="nav navbar-nav">
<li><a href="/journal/archive.html">Archive</a></li>
<li><a href="/journal/categories.html">Categories</a></li>
<li><a href="/journal/about.html">Contact</a></li>
<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Links</a>
<ul class="dropdown-menu">
	<li><a href="https://bitbucket.org/manu">Bitbucket</a></li>
	<li><a href="http://www.goodreads.com/user/show/2385793">Goodreads</a></li>
	<li><a href="http://last.fm/">Last.fm</a></li>
	<li><a href="https://linuxfr.org/">DLFP</a></li>
</ul></li>
</ul>
</div>
</div>
</nav>
<div class="container-fluid">
<div class="row">
<div class="col-sm-10">
 <h2>Naviguer autrement avec luakit</h2>
 <!--<span id="tag">fr</span>-->
 <span id="tag">
   
   <a href="/journal/categories.html#fr">fr</a>,
   </span>
 <p>Je teste régulièrement des navigateurs pour remplacer celui qui est mon préféré depuis presque 10 ans : opera. Firefox n&#8217;a jamais réussi à me convaincre. Je ne sais pas trop pourquoi epiphany ne ma plaît pas. Midori est sympathique mais manque d&#8217;un gestionnaire de mots de passe et parfois de stabilité. Chromium, bah, il est moche et a le même défaut que firefox : les extensions. Et voilà qu&#8217;opera est en train de gonfler (consomme plus de mémoire que firefox !) et ajoute des extensions aussi. Franchement, à quoi servent les extensions ? À modifier les sites que je visite ? Il y a les userscripts pour ça. À avoir de vraies applications bâties sur le navigateur ? Opera a déjà unite et widgets pour ça. Bref, exit Opera.</p>

<p>J&#8217;ai été intéressé par <a href='http://www.uzbl.org/'>uzbl</a> il y a quelques temps mais je ne m&#8217;y suis pas adapté (et je n&#8217;ai pas eu le courage d&#8217;adapter sa configuration à mes goûts). Mais l&#8217;idée du navigateur minimal avec un vrai moteur me séduisait. C&#8217;est sur la liste de diffusion d&#8217;<a href='http://awesome.naquadah.org'>awesome</a> que j&#8217;ai appris l&#8217;existence de luakit qui m&#8217;a plu au premier abord.</p>

<p><a href='http://luakit.org/'>luakit</a> est un navigateur en kit en lua (basé sur webkit). Les fichiers de configuration permettent de définir tout ce qu&#8217;on veut en plus, il suffit de savoir lire lua (et il n&#8217;y a rien de compliqué dans lua). Et en fait les configurations par défaut sont très bien.</p>

<p>Luakit possède même un gestionnaire de mots de passe (formfiller). Je mets mon login et mon mot de passe, je tape &#8216;zn&#8217; et un fichier texte qui va être sauvegardé dans <code>~/.local/share/luakit/forms/url</code> apparaît avec les infos en question. Après, &#8216;zl&#8217; remplira les champs avec les mêmes infos. (Aide-mémoire : l pour load, n pour new (et aussi e pour edit et a pour add)).</p>

<p>Deux défauts tout de même :</p>

<ul>
<li>pas de mouse gestures. Mais en fait luakit marche très bien sans souris, donc ça ne me manque pas trop.</li>

<li>les téléchargements : luakit utilise wget pour télécharger (c&#8217;est fondamentalement très bien). Le problème est qu&#8217;il n&#8217;y a pas de suivi possible : pas de barre de progression, pas de notification de fin de téléchargement. Pour la notification, j&#8217;ai échangé get contre un script perso qui fait un notify-send à la fin du téléchargement.</li>
</ul>

<p>Pour finir, quelques modifications de la configuration que j&#8217;ai faites</p>
<div class='highlight'><pre><code class='lua'><span class='c1'>-- binds.lua</span>
<span class='n'>add_cmds</span><span class='p'>({</span>
    <span class='c1'>-- Tabs</span>
    <span class='n'>cmd</span><span class='p'>({</span><span class='s2'>&quot;</span><span class='s'>buffernext&quot;</span><span class='p'>,</span> <span class='s2'>&quot;</span><span class='s'>bn&quot;</span><span class='p'>},</span>       <span class='k'>function</span> <span class='p'>(</span><span class='n'>w</span><span class='p'>)</span>    <span class='n'>w</span><span class='p'>:</span><span class='n'>prev_tab</span><span class='p'>()</span> <span class='k'>end</span><span class='p'>),</span>
    <span class='n'>cmd</span><span class='p'>({</span><span class='s2'>&quot;</span><span class='s'>bufferprevious&quot;</span><span class='p'>,</span> <span class='s2'>&quot;</span><span class='s'>bp&quot;</span><span class='p'>},</span>   <span class='k'>function</span> <span class='p'>(</span><span class='n'>w</span><span class='p'>)</span>    <span class='n'>w</span><span class='p'>:</span><span class='n'>next_tab</span><span class='p'>()</span> <span class='k'>end</span><span class='p'>)</span>
<span class='p'>})</span>

<span class='n'>add_binds</span><span class='p'>(</span><span class='s2'>&quot;</span><span class='s'>normal&quot;</span><span class='p'>,</span> <span class='p'>{</span>
    <span class='c1'>-- Tabs</span>
    <span class='n'>key</span><span class='p'>({</span><span class='s2'>&quot;</span><span class='s'>Control&quot;</span><span class='p'>},</span> <span class='s2'>&quot;</span><span class='s'>Left&quot;</span><span class='p'>,</span>        <span class='k'>function</span> <span class='p'>(</span><span class='n'>w</span><span class='p'>)</span>    <span class='n'>w</span><span class='p'>:</span><span class='n'>prev_tab</span><span class='p'>()</span> <span class='k'>end</span><span class='p'>),</span>
    <span class='n'>key</span><span class='p'>({</span><span class='s2'>&quot;</span><span class='s'>Control&quot;</span><span class='p'>},</span> <span class='s2'>&quot;</span><span class='s'>Right&quot;</span><span class='p'>,</span>       <span class='k'>function</span> <span class='p'>(</span><span class='n'>w</span><span class='p'>)</span>    <span class='n'>w</span><span class='p'>:</span><span class='n'>next_tab</span><span class='p'>()</span> <span class='k'>end</span><span class='p'>),</span>
    <span class='c1'>-- standard back/forward combo</span>
    <span class='n'>key</span><span class='p'>({</span><span class='s2'>&quot;</span><span class='s'>Mod1&quot;</span><span class='p'>},</span> <span class='s2'>&quot;</span><span class='s'>Left&quot;</span><span class='p'>,</span>           <span class='k'>function</span> <span class='p'>(</span><span class='n'>w</span><span class='p'>)</span>    <span class='n'>w</span><span class='p'>:</span><span class='n'>back</span><span class='p'>()</span>     <span class='k'>end</span><span class='p'>),</span>
    <span class='n'>key</span><span class='p'>({</span><span class='s2'>&quot;</span><span class='s'>Mod1&quot;</span><span class='p'>},</span> <span class='s2'>&quot;</span><span class='s'>Right&quot;</span><span class='p'>,</span>          <span class='k'>function</span> <span class='p'>(</span><span class='n'>w</span><span class='p'>)</span>    <span class='n'>w</span><span class='p'>:</span><span class='n'>forward</span><span class='p'>()</span>  <span class='k'>end</span><span class='p'>),</span>
    <span class='c1'>-- readability</span>
    <span class='n'>buf</span><span class='p'>(</span><span class='s2'>&quot;</span><span class='s'>^gor$&quot;</span><span class='p'>,</span> <span class='k'>function</span> <span class='p'>(</span><span class='n'>w</span><span class='p'>)</span> <span class='n'>w</span><span class='p'>:</span><span class='n'>eval_js</span><span class='p'>(</span><span class='s2'>&quot;</span><span class='s'>javascript:(function(){readStyle=...})();&quot;</span><span class='p'>,</span> <span class='s2'>&quot;</span><span class='s'>javascript&quot;</span><span class='p'>)</span> <span class='k'>end</span><span class='p'>),</span>
    <span class='c1'>-- instapaper</span>
    <span class='n'>buf</span><span class='p'>(</span><span class='s2'>&quot;</span><span class='s'>^goi$&quot;</span><span class='p'>,</span> <span class='k'>function</span> <span class='p'>(</span><span class='n'>w</span><span class='p'>)</span> <span class='n'>w</span><span class='p'>:</span><span class='n'>eval_js</span><span class='p'>(</span><span class='s2'>&quot;</span><span class='s'>javascript:function...;void(0)&quot;</span><span class='p'>,</span> <span class='s2'>&quot;</span><span class='s'>javascript&quot;</span><span class='p'>)</span> <span class='k'>end</span><span class='p'>),</span>
    <span class='c1'>-- delicious</span>
    <span class='n'>buf</span><span class='p'>(</span><span class='s2'>&quot;</span><span class='s'>^god$&quot;</span><span class='p'>,</span> <span class='k'>function</span> <span class='p'>(</span><span class='n'>w</span><span class='p'>)</span> <span class='n'>w</span><span class='p'>:</span><span class='n'>eval_js</span><span class='p'>(</span><span class='s2'>&quot;</span><span class='s'>javascript:(function(){location.href=&#39;http://www.delicious.com/save?url=&#39;+encodeURIComponent(window.location.href)+&#39;&amp;title=&#39;+encodeURIComponent(document.title)+&#39;&amp;v=5&amp;jump=yes&#39;})()&quot;</span><span class='p'>,</span> <span class='s2'>&quot;</span><span class='s'>javascript&quot;</span><span class='p'>)</span> <span class='k'>end</span><span class='p'>)</span>
<span class='p'>})</span>
</code></pre>
</div>
<p>Les <code>javascript:...</code> correspondent au lien javascript donné par le bookmarklet.</p>
<hr />
<p><strong>Update</strong></p>

<p>Luakit ayant un peu évolué, les lignes ci-dessus pour les appels javascript ne sont plus corrects : il faut remplacer <code>w:eval_js</code> par <code>w.view:eval_js</code> et le second argument est déprécié. Ce qui donne des lignes du genre</p>
<div class='highlight'><pre><code class='lua'><span class='n'>buf</span><span class='p'>(</span><span class='s2'>&quot;</span><span class='s'>^gor$&quot;</span><span class='p'>,</span> <span class='k'>function</span> <span class='p'>(</span><span class='n'>w</span><span class='p'>)</span> <span class='n'>w</span><span class='p'>.</span><span class='n'>view</span><span class='p'>:</span><span class='n'>eval_js</span><span class='p'>(</span><span class='s2'>&quot;</span><span class='s'>javascript:(function(){_readableOptions=...;})()&quot;</span><span class='p'>)</span> <span class='k'>end</span><span class='p'>),</span>
</code></pre>
</div>
<div class="date">Écrit le 25 November 2010 par <a href="https://plus.google.com/103784259248105086753?rel=author">Emmanuel</a></div>
</div>
<div class="col-sm-2">
  <a href="/journal/index.html">Index</a><br />
  Next: <a href="/journal/2011/01-05/Ecrire-coreen.html">Écrire coréen et japonais</a><br />
  Prev: <a href="/journal/2010/11-19/Google-also-fails-on-standard.html">Google also fails on standards</a><br />
</div>
</div>
</div>
<script src="../../js/jquery.min.js"></script>
<script src="../../js/bootstrap.min.js"></script>
</body>
</html>
